{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Notifications ‚Äì HelpLink</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="min-h-screen bg-gradient-to-br from-orange-50 via-rose-50 to-purple-50 p-6">
    <div class="max-w-3xl mx-auto bg-white/90 rounded-3xl shadow-2xl p-8 border border-gray-200">
      <h1 class="text-3xl font-bold text-gray-900 mb-8 text-center">üîî Notifications</h1>

      {% if notifications %}
        <ul class="space-y-6">
          {% for n in notifications %}
            <li class="p-6 rounded-2xl border-l-8 shadow-md hover:shadow-lg transition duration-300
                {% if n.help_request %}
                  {% if n.help_request.is_completed %}
                    border-green-500
                  {% elif n.help_request.is_accepted %}
                    border-blue-500
                  {% else %}
                    border-yellow-400
                  {% endif %}
                {% else %}
                  border-gray-300
                {% endif %}
            ">
              <!-- Notification Message -->
              <div class="flex justify-between items-start">
                <div>
                  <p class="text-gray-800 font-semibold text-lg">{{ n.message }}</p>
                  <span class="block text-xs text-gray-400 mt-1">{{ n.created_at|date:"M d, Y ‚Äì H:i" }}</span>
                </div>

                <!-- Status Badge -->
                {% if n.help_request %}
                  <div>
                    {% if n.help_request.is_completed %}
                      <span class="bg-green-100 text-green-700 text-xs font-semibold px-2 py-1 rounded-full">‚úÖ Completed</span>
                    {% elif n.help_request.is_accepted %}
                      <span class="bg-blue-100 text-blue-700 text-xs font-semibold px-2 py-1 rounded-full">üü¢ Accepted</span>
                    {% else %}
                      <span class="bg-yellow-100 text-yellow-700 text-xs font-semibold px-2 py-1 rounded-full">‚è≥ Pending</span>
                    {% endif %}
                  </div>
                {% endif %}
              </div>

              <!-- Help Request Details -->
              {% if n.help_request %}
              <div class="mt-4 border-t pt-4 text-sm text-gray-700 space-y-1">
                <p><b>Title:</b> {{ n.help_request.title }}</p>
                <p><b>Description:</b> {{ n.help_request.description }}</p>
                <p><b>Location:</b> {{ n.help_request.location }}</p>
                <p><b>Category:</b> {{ n.help_request.category }}</p>
                <p>
                  <b>Urgency:</b>
                  <span
                    class="{% if n.help_request.urgency == 'high' %}text-red-500{% elif n.help_request.urgency == 'medium' %}text-yellow-500{% else %}text-green-500{% endif %} font-semibold"
                  >{{ n.help_request.urgency }}</span>
                </p>

                <!-- Action Buttons -->
                <div class="mt-3 flex flex-wrap gap-3">
                  {% if n.help_request.is_completed %}
                    <span class="text-green-700 font-semibold">‚úÖ Task Completed</span>
                  {% elif n.help_request.is_accepted %}
                    <a
                      href="{% url 'complete_request' n.help_request.id %}"
                      class="bg-green-500 text-white px-4 py-1 rounded-lg hover:bg-green-600 text-sm"
                    >Mark as Completed</a>
                  {% else %}
                    <a
                      href="{% url 'accept_request' n.help_request.id %}"
                      class="bg-blue-500 text-white px-4 py-1 rounded-lg hover:bg-blue-600 text-sm"
                    >Accept Request</a>
                  {% endif %}
                </div>
              </div>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="text-gray-600 text-center mt-12 text-lg">No notifications yet üéâ</p>
      {% endif %}

      <!-- Back Button -->
      <div class="text-center mt-10">
        <a href="{% url 'requests' %}" class="text-rose-500 hover:underline text-sm">‚Üê Back to Requests</a>
      </div>
    </div>
  </body>
</html>
